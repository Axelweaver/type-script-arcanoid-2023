var B=Object.defineProperty;var I=(o,t,i)=>t in o?B(o,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[t]=i;var h=(o,t,i)=>(I(o,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();class x{constructor(t,i,e,s,n){h(this,"moveLeft");h(this,"moveRight");h(this,"_color");h(this,"handleKeyUp",t=>{(t.code==="ArrowLeft"||t.key==="ArrowLeft"||t.code==="KeyA"||t.key.toUpperCase()==="A")&&(this.moveLeft=!1),(t.code==="ArrowRight"||t.key==="ArrowRight"||t.code==="KeyD"||t.key.toUpperCase()==="D")&&(this.moveRight=!1)});h(this,"handleKeyDown",t=>{(t.code==="ArrowLeft"||t.key==="ArrowLeft"||t.code==="KeyA"||t.key.toUpperCase()==="A")&&(this.moveLeft=!0),(t.code==="ArrowRight"||t.key==="ArrowRight"||t.code==="KeyD"||t.key.toUpperCase()==="D")&&(this.moveRight=!0)});this.speed=t,this.platformWidth=i,this.platformHeight=e,this._position=s,this.speed=t,this.platformWidth=i,this.platformHeight=e,this._position=s,this.moveLeft=!1,this.moveRight=!1,this._color=n,document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}get width(){return this.platformWidth}get height(){return this.platformHeight}get position(){return this._position}get isMovingLeft(){return this.moveLeft}get isMovingRight(){return this.moveRight}get color(){return this._color}move(){this.moveLeft&&(this.position.x-=this.speed),this.moveRight&&(this.position.x+=this.speed)}}class M{constructor(t,i,e,s){h(this,"speed");h(this,"_color");h(this,"_radius");h(this,"_radiusSquare");this._ballSize=i,this._position=e,this._ballSize=i,this._position=e,this.speed={x:t,y:-t},this._color=s,this._radius=Math.round(this._ballSize/2),this._radiusSquare=this._radius*this._radius}get width(){return this._ballSize}get height(){return this._ballSize}get radius(){return this._radius}get radiusSquare(){return this._radiusSquare}get position(){return this._position}get color(){return this._color}changeYDirection(){this.speed.y=-this.speed.y}changeXDirection(){this.speed.x=-this.speed.x}moveBall(){this.position.x+=this.speed.x,this.position.y+=this.speed.y}}const P=""+new URL("emptyheart-cdbc192a.png",import.meta.url).href,T=""+new URL("filledheart-7a401f85.png",import.meta.url).href,d=document.querySelector("#gameCanvas"),R=3,u=10,D=20,y=10,f=5,S=d!=null?Math.floor((d.width-u*2)/y)-f:100,C=d!=null?Math.floor((d.height-u*2)/D)-f:30,w={0:P,1:T},p=20,k=150,m=25,F=450,K=10,G="#FFF8DC",H=3,W=14,Y=500,q=400,U="#F0F8FF",z="#00FFFF",N="#7FFFD4",X="#DC143C",V="#008000",L="#FFFFF0",$="#A52A2A",Z="#228B22",j="#EEE8AA",J="#4169E1",Q="#663399",b={1:$,2:Z,3:j,4:J,5:Q},tt={1:1,2:1,3:2,4:2,5:3},it=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,2,2,2,2,2,2,2,2,0,0,3,3,3,3,3,3,3,3,0,0,0,4,4,4,4,4,4,0,0,0,0,5,5,0,0,5,5,0,0];class ot{constructor(t,i,e,s,n){h(this,"brickColor");this._brickWidth=t,this._brickHeight=i,this._position=e,this._brickEnergy=s,this._brickWidth=t,this._brickHeight=i,this._position=e,this._brickEnergy=s,this.brickColor=n}blink(){if(this._brickEnergy<=0)return;const t=this.brickColor;this.brickColor=z,setTimeout(()=>{this.brickColor=t},70)}get width(){return this._brickWidth}get height(){return this._brickHeight}get position(){return this._position}get color(){return this.brickColor}get energy(){return this._brickEnergy}set energy(t){this._brickEnergy=t,this.blink()}}function A(){return new M(H,W,{x:Y,y:q},U)}function et(){return it.reduce((o,t,i)=>{const e=Math.floor((i+1)/y),s=i%y,n=u+s*(S+f),r=u+e*(C+f);return t===0?o:[...o,new ot(S,C,{x:n,y:r},tt[t],b[t])]},[])}function O(o){return new x(K,k,m,{x:F,y:o-m-5},G)}function st(o,t,i,e,s){o!=null&&(o.fillStyle=t,o.beginPath(),o.arc(i,e,s*2,0,2*Math.PI,!1),o.fill())}function nt(o,t,i,e,s,n){if(o==null)return;const r=new Image;r.src=t,o.drawImage(r,i,e,s,n)}function rt(o,t,i,e){if(o==null)return;const s=Math.round(o.canvas.width/100);for(let n=0;n<R;n++){const r=t>n?w[1]:w[0];nt(o,r,i,e,p,p),i+=p+s}}function E(o,t,i,e,s,n){o!=null&&(o.fillStyle=t,o.beginPath(),o.rect(i,e,s,n),o.fill(),o.stroke())}function _(o,t,i,e,s,n,r="left"){o!=null&&(o.fillStyle=t,o.font=i,o.textAlign=r,o.textBaseline="middle",o.fillText(n,e,s))}class ht{constructor(t){h(this,"canvas");h(this,"context");this.canvas=document.querySelector(t),this.context=this.canvas.getContext("2d")}clear(){var t;(t=this.context)==null||t.clearRect(0,0,this.canvas.width,this.canvas.height)}initStartButton(t){const i=e=>{(e.code==="Space"||e.key==="Space")&&t(this)};document.addEventListener("keypress",i),this.drawInfo("GET READY",L),this.waitPressToStart()}waitPressToStart(){this.drawSecondaryInfo("press space",L)}drawScore(t){const i=Math.round(this.canvas.height/24),e=this.canvas.width-Math.round(this.canvas.width/8),s=`score: ${t}`,r=`bold ${Math.round(this.canvas.height/33)}px Verdana`;_(this.context,N,r,e,i,s,"left")}showLives(t){const i=Math.round(this.canvas.height/36),e=Math.round(this.canvas.width*.025);rt(this.context,t,e,i)}drawInfo(t,i){const e=Math.round(this.canvas.height/2),s=Math.round(this.canvas.width/2),r=`bold ${Math.round(this.canvas.width/18)}px Verdana`;_(this.context,i,r,s,e,t,"center")}drawSecondaryInfo(t,i){const e=Math.round(this.canvas.height/2)+Math.round(this.canvas.height/5),s=Math.round(this.canvas.width/2),r=`bold ${Math.round(this.canvas.width/22)}px Verdana`;_(this.context,i,r,s,e,t,"center")}drawPlatform(t){E(this.context,t.color,t.position.x,t.position.y,t.width,t.height)}drawBall(t){st(this.context,t.color,t.position.x,t.position.y,t.radius)}drawBrick(t){E(this.context,t.color,t.position.x,t.position.y,t.width,t.height)}drawBricks(t){t.forEach(i=>{this.drawBrick(i)})}}class ct{checkCollisionCircleWithRect(t,i){const e=Math.max(i.position.x,Math.min(t.position.x,i.position.x+i.width)),s=Math.max(i.position.y,Math.min(t.position.y,i.position.y+i.height));return(e-t.position.x)**2+(s-t.position.y)**2<t.radiusSquare}isSideColliding(t,i){return t.position.y>i.position.y&&t.position.y<i.position.y+i.height&&(t.position.x<i.position.x||t.position.x>i.position.x+i.width)}isCollidingBricks(t,i){let e=!1;return i.forEach((s,n)=>{this.checkCollisionCircleWithRect(t,s)&&(t.changeYDirection(),this.isSideColliding(t,s)&&t.changeXDirection(),s.energy===1?i.splice(n,1):s.energy-=1,e=!0)}),e}checkBallCollision(t,i,e){this.checkCollisionCircleWithRect(t,i)&&(t.changeYDirection(),this.isSideColliding(t,i)&&t.changeXDirection()),(t.position.x>e.canvas.width-t.radius||t.position.x-t.radius<=0)&&t.changeXDirection(),t.position.y-t.radius<=0&&t.changeYDirection()}}let l=!1,g=!0,a=0,c=R;function at(o){o.drawInfo("Game Over!",X),l=!1,o.waitPressToStart()}function dt(o){o.drawInfo("Game Won!",V),l=!1,o.waitPressToStart()}function v(o,t,i,e,s){if(o.clear(),o.drawScore(a),o.showLives(c),o.drawBricks(t),o.drawPlatform(i),g){if(e.moveBall(),o.drawBall(e),(i.isMovingLeft&&i.position.x>0||i.isMovingRight&&i.position.x<o.canvas.width-i.width)&&i.move(),s.checkBallCollision(e,i,o),s.isCollidingBricks(e,t)&&(a+=1,o.drawScore(a)),e.position.y-e.height>o.canvas.height&&(c=c-1,c<1?l=!0:g=!1),t.length===0){dt(o);return}if(l){at(o);return}}else o.drawInfo("GET READY!",L),o.waitPressToStart(),e.position.y-e.height>o.canvas.height&&(e=A(),i=O(o.canvas.height));requestAnimationFrame(()=>{v(o,t,i,e,s)})}function ut(o){if(g){ft(o);return}g=!0}function ft(o){a=0,c=R,o.drawScore(0);const t=new ct,i=et(),e=A(),s=O(o.canvas.height);v(o,i,s,e,t)}const lt=new ht("#gameCanvas");lt.initStartButton(ut);
