var v=Object.defineProperty;var I=(i,t,e)=>t in i?v(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var h=(i,t,e)=>(I(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=e(o);fetch(o.href,n)}})();class P{constructor(t,e,s,o,n){h(this,"moveLeft");h(this,"moveRight");h(this,"_color");h(this,"handleKeyUp",t=>{(t.code==="ArrowLeft"||t.key==="ArrowLeft")&&(this.moveLeft=!1),(t.code==="ArrowRight"||t.key==="ArrowRight")&&(this.moveRight=!1)});h(this,"handleKeyDown",t=>{(t.code==="ArrowLeft"||t.key==="ArrowLeft")&&(this.moveLeft=!0),(t.code==="ArrowRight"||t.key==="ArrowRight")&&(this.moveRight=!0)});this.speed=t,this.platformWidth=e,this.platformHeight=s,this._position=o,this.speed=t,this.platformWidth=e,this.platformHeight=s,this._position=o,this.moveLeft=!1,this.moveRight=!1,this._color=n,document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}get width(){return this.platformWidth}get height(){return this.platformHeight}get position(){return this._position}get isMovingLeft(){return this.moveLeft}get isMovingRight(){return this.moveRight}get color(){return this._color}move(){this.moveLeft&&(this.position.x-=this.speed),this.moveRight&&(this.position.x+=this.speed)}}class T{constructor(t,e,s,o){h(this,"speed");h(this,"_color");this._ballSize=e,this._position=s,this._ballSize=e,this._position=s,this.speed={x:t,y:-t},this._color=o}get width(){return this._ballSize}get height(){return this._ballSize}get radius(){return Math.round(this._ballSize/2)}get position(){return this._position}get color(){return this._color}changeYDirection(){this.speed.y=-this.speed.y}changeXDirection(){this.speed.x=-this.speed.x}moveBall(){this.position.x+=this.speed.x,this.position.y+=this.speed.y}}const x="/type-script-arcanoid-2023/assets/emptyheart-cdbc192a.png",M="/type-script-arcanoid-2023/assets/filledheart-7a401f85.png",d=document.querySelector("#gameCanvas"),R=3,u=10,F=20,L=10,f=5,w=d?Math.floor((d.width-u*2)/L)-f:100,E=d?Math.floor((d.height-u*2)/F)-f:30,S={0:x,1:M},p=20,D=150,C=25,k=450,G=10,K="#FFF8DC",H=3,Y=14,W=500,z=400,N="#F0F8FF",V="#00FFFF",X="#7FFFD4",U="#DC143C",q="#008000",y="#FFFFF0",$="#A52A2A",Z="#228B22",j="#EEE8AA",J="#4169E1",Q="#663399",b={1:$,2:Z,3:j,4:J,5:Q},tt={1:1,2:1,3:2,4:2,5:3},it=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,2,2,2,2,2,2,2,2,0,0,3,3,3,3,3,3,3,3,0,0,0,4,4,4,4,4,4,0,0,0,0,5,5,0,0,5,5,0,0];class et{constructor(t,e,s,o,n){h(this,"brickColor");this._brickWidth=t,this._brickHeight=e,this._position=s,this._brickEnergy=o,this._brickWidth=t,this._brickHeight=e,this._position=s,this._brickEnergy=o,this.brickColor=n}blink(){if(this._brickEnergy<=0)return;let t=this.brickColor;this.brickColor=V,setTimeout(()=>this.brickColor=t,70)}get width(){return this._brickWidth}get height(){return this._brickHeight}get position(){return this._position}get color(){return this.brickColor}get energy(){return this._brickEnergy}set energy(t){this._brickEnergy=t,this.blink()}}function A(){return new T(H,Y,{x:W,y:z},N)}function st(){return it.reduce((i,t,e)=>{const s=Math.floor((e+1)/L),o=e%L,n=u+o*(w+f),r=u+s*(E+f);return t===0?i:[...i,new et(w,E,{x:n,y:r},tt[t],b[t])]},[])}function m(i){return new P(G,D,C,{x:k,y:i-C-5},K)}function ot(i,t,e,s,o){i&&(i.fillStyle=t,i.beginPath(),i.arc(e,s,o*2,0,2*Math.PI,!1),i.fill())}function nt(i,t,e,s,o,n){if(!i)return;let r=new Image;r.src=t,i.drawImage(r,e,s,o,n)}function rt(i,t,e,s){if(!i)return;let o=Math.round(i.canvas.width/100);for(let n=0;n<R;n++){let r=t>n?S[1]:S[0];nt(i,r,e,s,p,p),e+=p+o}}function O(i,t,e,s,o,n){i&&(i.fillStyle=t,i.beginPath(),i.rect(e,s,o,n),i.fill(),i.stroke())}function _(i,t,e,s,o,n,r){i&&(i.fillStyle=t,i.font=e,i.textAlign=r||"left",i.textBaseline="middle",i.fillText(n,s,o))}class ht{constructor(t){h(this,"canvas");h(this,"context");this.canvas=document.querySelector(t),this.context=this.canvas.getContext("2d")}clear(){var t;(t=this.context)==null||t.clearRect(0,0,this.canvas.width,this.canvas.height)}initStartButton(t){let e=s=>{(s.code==="Space"||s.key==="Space")&&t(this)};document.addEventListener("keypress",e),this.drawInfo("GET READY",y),this.waitPressToStart()}waitPressToStart(){this.drawSecondaryInfo("press space",y)}drawScore(t){let e=Math.round(this.canvas.height/24),s=this.canvas.width-Math.round(this.canvas.width/8),o=`score: ${t}`;const r=`bold ${Math.round(this.canvas.height/33)}px Verdana`;_(this.context,X,r,s,e,o,"left")}showLives(t){let e=Math.round(this.canvas.height/36),s=Math.round(this.canvas.width*.025);rt(this.context,t,s,e)}drawInfo(t,e){let s=Math.round(this.canvas.height/2),o=Math.round(this.canvas.width/2);const r=`bold ${Math.round(this.canvas.width/18)}px Verdana`;_(this.context,e,r,o,s,t,"center")}drawSecondaryInfo(t,e){let s=Math.round(this.canvas.height/2)+Math.round(this.canvas.height/5),o=Math.round(this.canvas.width/2);const r=`bold ${Math.round(this.canvas.width/22)}px Verdana`;_(this.context,e,r,o,s,t,"center")}drawPlatform(t){O(this.context,t.color,t.position.x,t.position.y,t.width,t.height)}drawBall(t){ot(this.context,t.color,t.position.x,t.position.y,t.radius)}drawBrick(t){O(this.context,t.color,t.position.x,t.position.y,t.width,t.height)}drawBricks(t){t.forEach(e=>this.drawBrick(e))}}class ct{isCollidingBrick(t,e){return!(t.position.y+t.radius<=e.position.y||t.position.y-t.radius>=e.position.y+e.height||t.position.x+t.radius<=e.position.x||t.position.x-t.radius>=e.position.x+e.width)}isCollidingBricks(t,e){let s=!1;return e.forEach((o,n)=>{this.isCollidingBrick(t,o)&&(t.changeYDirection(),o.energy===1?e.splice(n,1):o.energy-=1,s=!0)}),s}checkBallCollision(t,e,s){t.position.x-t.radius>=e.position.x&&t.position.x+t.radius<=e.position.x+e.width&&t.position.y+t.radius>=e.position.y&&t.position.y+t.radius<=e.position.y+2&&t.changeYDirection(),(t.position.x>=s.canvas.width-t.radius||t.position.x-t.radius<=0)&&t.changeXDirection(),t.position.y-t.radius<=0&&t.changeYDirection()}}let g=!1,l=!0,a=0,c=R;function at(i){i.drawInfo("Game Over!",U),g=!1,i.waitPressToStart()}function dt(i){i.drawInfo("Game Won!",q),g=!1,i.waitPressToStart()}function B(i,t,e,s,o){if(i.clear(),i.drawScore(a),i.showLives(c),i.drawBricks(t),i.drawPlatform(e),l){if(s.moveBall(),i.drawBall(s),(e.isMovingLeft&&e.position.x>0||e.isMovingRight&&e.position.x<i.canvas.width-e.width)&&e.move(),o.checkBallCollision(s,e,i),o.isCollidingBricks(s,t)&&(a+=1,i.drawScore(a)),s.position.y-s.height>i.canvas.height&&(c=c-1,c<1?g=!0:l=!1),t.length===0)return dt(i);if(g)return at(i)}else i.drawInfo("GET READY!",y),i.waitPressToStart(),s.position.y-s.height>i.canvas.height&&(s=A(),e=m(i.canvas.height));requestAnimationFrame(()=>B(i,t,e,s,o))}function ut(i){if(l){ft(i);return}l=!0}function ft(i){a=0,c=R,i.drawScore(0);const t=new ct,e=st(),s=A(),o=m(i.canvas.height);B(i,e,o,s,t)}const gt=new ht("#gameCanvas");gt.initStartButton(ut);
