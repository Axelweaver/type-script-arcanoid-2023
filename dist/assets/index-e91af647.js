var R=Object.defineProperty;var w=(e,t,i)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var r=(e,t,i)=>(w(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();class B{constructor(t,i,s,o,n){r(this,"moveLeft");r(this,"moveRight");r(this,"_color");r(this,"handleKeyUp",t=>{(t.code==="ArrowLeft"||t.key==="ArrowLeft")&&(this.moveLeft=!1),(t.code==="ArrowRight"||t.key==="ArrowRight")&&(this.moveRight=!1)});r(this,"handleKeyDown",t=>{(t.code==="ArrowLeft"||t.key==="ArrowLeft")&&(this.moveLeft=!0),(t.code==="ArrowRight"||t.key==="ArrowRight")&&(this.moveRight=!0)});this.speed=t,this.platformWidth=i,this.platformHeight=s,this._position=o,this.speed=t,this.platformWidth=i,this.platformHeight=s,this._position=o,this.moveLeft=!1,this.moveRight=!1,this._color=n,document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}get width(){return this.platformWidth}get height(){return this.platformHeight}get position(){return this._position}get isMovingLeft(){return this.moveLeft}get isMovingRight(){return this.moveRight}get color(){return this._color}move(){this.moveLeft&&(this.position.x-=this.speed),this.moveRight&&(this.position.x+=this.speed)}}class m{constructor(t,i,s,o){r(this,"speed");r(this,"_color");this._ballSize=i,this._position=s,this._ballSize=i,this._position=s,this.speed={x:t,y:-t},this._color=o}get width(){return this._ballSize}get height(){return this._ballSize}get radius(){return this._ballSize}get position(){return this._position}get color(){return this._color}changeYDirection(){this.speed.y=-this.speed.y}changeXDirection(){this.speed.x=-this.speed.x}moveBall(){this.position.x+=this.speed.x,this.position.y+=this.speed.y}}class C{constructor(t,i,s,o,n){r(this,"brickColor");this._brickWidth=t,this._brickHeight=i,this._position=s,this._brickEnergy=o,this._brickWidth=t,this._brickHeight=i,this._position=s,this._brickEnergy=o,this.brickColor=n}get width(){return this._brickWidth}get height(){return this._brickHeight}get position(){return this._position}get color(){return this.brickColor}get energy(){return this._brickEnergy}set energy(t){this._brickEnergy=t}}function l(e,t,i,s,o,n){e&&(e.fillStyle=t,e.beginPath(),e.rect(i,s,o,n),e.fill(),e.stroke())}function A(e,t,i,s,o){e&&(e.fillStyle=t,e.beginPath(),e.arc(i,s,o,0,2*Math.PI,!1),e.fill())}const h=document.querySelector("#gameCanvas"),a=10,E=20,u=10,d=5,p=h?Math.floor((h.width-a*2)/u)-d:100,y=h?Math.floor((h.height-a*2)/E)-d:30,O=150,L=25,S=450,v=10,x="#FFF8DC",I=5,D=20,P=500,T=400,M="#F0F8FF",K="#A52A2A",F="#228B22",G="#EEE8AA",k="#4169E1",H="#663399",W={1:K,2:F,3:G,4:k,5:H},q={1:1,2:1,3:2,4:2,5:3},N=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,2,2,2,2,2,2,2,2,0,0,3,3,3,3,3,3,3,3,0,0,0,4,4,4,4,4,4,0,0,0,0,5,5,0,0,5,5,0,0];function Y(){return N.reduce((e,t,i)=>{const s=Math.floor((i+1)/u),o=i%u,n=a+o*(p+d),c=a+s*(y+d);return t===0?e:[...e,new C(p,y,{x:n,y:c},q[t],W[t])]},[])}class z{constructor(t){r(this,"canvas");r(this,"context");r(this,"scoreDisplay");r(this,"start");r(this,"info");this.canvas=document.querySelector(t),this.context=this.canvas.getContext("2d"),this.scoreDisplay=document.querySelector("#score"),this.start=document.querySelector("#start"),this.info=document.querySelector("#info")}clear(){var t;(t=this.context)==null||t.clearRect(0,0,this.canvas.width,this.canvas.height)}initStartButton(t){var i;(i=this.start)==null||i.addEventListener("click",()=>t(this))}drawScore(t){this.scoreDisplay&&(this.scoreDisplay.innerHTML=t.toString())}drawInfo(t){this.info&&(this.info.innerHTML=t)}drawPlatform(t){l(this.context,t.color,t.position.x,t.position.y,t.width,t.height)}drawBall(t){A(this.context,t.color,t.position.x,t.position.y,t.radius)}drawBrick(t){l(this.context,t.color,t.position.x,t.position.y,t.width,t.height)}drawBricks(t){t.forEach(i=>this.drawBrick(i))}}class U{isCollidingBrick(t,i){return t.position.x<i.position.x+i.width&&t.position.x+t.width>i.position.x&&t.position.y<i.position.y+i.height&&t.position.y+t.height>i.position.y}isCollidingBricks(t,i){let s=!1;return i.forEach((o,n)=>{this.isCollidingBrick(t,o)&&(t.changeYDirection(),o.energy===1?i.splice(n,1):o.energy-=1,s=!0)}),s}checkBallCollision(t,i,s){t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&t.position.y+t.height===i.position.y&&t.changeYDirection(),(t.position.x>s.canvas.width-t.width||t.position.x<0)&&t.changeXDirection(),t.position.y<0&&t.changeYDirection()}}let f=!1,g=0;function X(e){e.drawInfo("Game Over!"),f=!1}function V(e){e.drawInfo("Game Won!"),f=!1}function _(e,t,i,s,o){if(console.log("draw!"),e.clear(),e.drawBricks(t),e.drawPlatform(i),e.drawBall(s),s.moveBall(),(i.isMovingLeft&&i.position.x>0||i.isMovingRight&&i.position.x<e.canvas.width-i.width)&&i.move(),o.checkBallCollision(s,i,e),o.isCollidingBricks(s,t)&&(g+=1,e.drawScore(g)),s.position.y>e.canvas.height&&(f=!0),t.length===0)return V(e);if(f)return X(e);requestAnimationFrame(()=>_(e,t,i,s,o))}function Z(e){g=0,e.drawInfo(""),e.drawScore(0);const t=new U,i=Y(),s=new m(I,D,{x:P,y:T},M),o=new B(v,O,L,{x:S,y:e.canvas.height-L-5},x);_(e,i,o,s,t)}const j=new z("#gameCanvas");j.initStartButton(Z);
