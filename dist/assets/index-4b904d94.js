var v=Object.defineProperty;var I=(i,t,e)=>t in i?v(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var h=(i,t,e)=>(I(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();class P{constructor(t,e,o,s,n){h(this,"moveLeft");h(this,"moveRight");h(this,"_color");h(this,"handleKeyUp",t=>{(t.code==="ArrowLeft"||t.key==="ArrowLeft"||t.code==="KeyA"||t.key.toUpperCase()==="A")&&(this.moveLeft=!1),(t.code==="ArrowRight"||t.key==="ArrowRight"||t.code==="KeyD"||t.key.toUpperCase()==="D")&&(this.moveRight=!1)});h(this,"handleKeyDown",t=>{(t.code==="ArrowLeft"||t.key==="ArrowLeft"||t.code==="KeyA"||t.key.toUpperCase()==="A")&&(this.moveLeft=!0),(t.code==="ArrowRight"||t.key==="ArrowRight"||t.code==="KeyD"||t.key.toUpperCase()==="D")&&(this.moveRight=!0)});this.speed=t,this.platformWidth=e,this.platformHeight=o,this._position=s,this.speed=t,this.platformWidth=e,this.platformHeight=o,this._position=s,this.moveLeft=!1,this.moveRight=!1,this._color=n,document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}get width(){return this.platformWidth}get height(){return this.platformHeight}get position(){return this._position}get isMovingLeft(){return this.moveLeft}get isMovingRight(){return this.moveRight}get color(){return this._color}move(){this.moveLeft&&(this.position.x-=this.speed),this.moveRight&&(this.position.x+=this.speed)}}class T{constructor(t,e,o,s){h(this,"speed");h(this,"_color");this._ballSize=e,this._position=o,this._ballSize=e,this._position=o,this.speed={x:t,y:-t},this._color=s}get width(){return this._ballSize}get height(){return this._ballSize}get radius(){return Math.round(this._ballSize/2)}get position(){return this._position}get color(){return this._color}changeYDirection(){this.speed.y=-this.speed.y}changeXDirection(){this.speed.x=-this.speed.x}moveBall(){this.position.x+=this.speed.x,this.position.y+=this.speed.y}}const x="/assets/emptyheart-cdbc192a.png",M="/assets/filledheart-7a401f85.png",d=document.querySelector("#gameCanvas"),R=3,u=10,D=20,_=10,f=5,w=d?Math.floor((d.width-u*2)/_)-f:100,E=d?Math.floor((d.height-u*2)/D)-f:30,C={0:x,1:M},p=20,F=150,S=25,k=450,K=10,G="#FFF8DC",H=3,Y=14,W=500,z=400,N="#F0F8FF",U="#00FFFF",V="#7FFFD4",X="#DC143C",q="#008000",L="#FFFFF0",$="#A52A2A",Z="#228B22",j="#EEE8AA",J="#4169E1",Q="#663399",b={1:$,2:Z,3:j,4:J,5:Q},tt={1:1,2:1,3:2,4:2,5:3},it=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,2,2,2,2,2,2,2,2,0,0,3,3,3,3,3,3,3,3,0,0,0,4,4,4,4,4,4,0,0,0,0,5,5,0,0,5,5,0,0];class et{constructor(t,e,o,s,n){h(this,"brickColor");this._brickWidth=t,this._brickHeight=e,this._position=o,this._brickEnergy=s,this._brickWidth=t,this._brickHeight=e,this._position=o,this._brickEnergy=s,this.brickColor=n}blink(){if(this._brickEnergy<=0)return;let t=this.brickColor;this.brickColor=U,setTimeout(()=>this.brickColor=t,70)}get width(){return this._brickWidth}get height(){return this._brickHeight}get position(){return this._position}get color(){return this.brickColor}get energy(){return this._brickEnergy}set energy(t){this._brickEnergy=t,this.blink()}}function O(){return new T(H,Y,{x:W,y:z},N)}function ot(){return it.reduce((i,t,e)=>{const o=Math.floor((e+1)/_),s=e%_,n=u+s*(w+f),r=u+o*(E+f);return t===0?i:[...i,new et(w,E,{x:n,y:r},tt[t],b[t])]},[])}function m(i){return new P(K,F,S,{x:k,y:i-S-5},G)}function st(i,t,e,o,s){i&&(i.fillStyle=t,i.beginPath(),i.arc(e,o,s*2,0,2*Math.PI,!1),i.fill())}function nt(i,t,e,o,s,n){if(!i)return;let r=new Image;r.src=t,i.drawImage(r,e,o,s,n)}function rt(i,t,e,o){if(!i)return;let s=Math.round(i.canvas.width/100);for(let n=0;n<R;n++){let r=t>n?C[1]:C[0];nt(i,r,e,o,p,p),e+=p+s}}function A(i,t,e,o,s,n){i&&(i.fillStyle=t,i.beginPath(),i.rect(e,o,s,n),i.fill(),i.stroke())}function y(i,t,e,o,s,n,r){i&&(i.fillStyle=t,i.font=e,i.textAlign=r||"left",i.textBaseline="middle",i.fillText(n,o,s))}class ht{constructor(t){h(this,"canvas");h(this,"context");this.canvas=document.querySelector(t),this.context=this.canvas.getContext("2d")}clear(){var t;(t=this.context)==null||t.clearRect(0,0,this.canvas.width,this.canvas.height)}initStartButton(t){let e=o=>{(o.code==="Space"||o.key==="Space")&&t(this)};document.addEventListener("keypress",e),this.drawInfo("GET READY",L),this.waitPressToStart()}waitPressToStart(){this.drawSecondaryInfo("press space",L)}drawScore(t){let e=Math.round(this.canvas.height/24),o=this.canvas.width-Math.round(this.canvas.width/8),s=`score: ${t}`;const r=`bold ${Math.round(this.canvas.height/33)}px Verdana`;y(this.context,V,r,o,e,s,"left")}showLives(t){let e=Math.round(this.canvas.height/36),o=Math.round(this.canvas.width*.025);rt(this.context,t,o,e)}drawInfo(t,e){let o=Math.round(this.canvas.height/2),s=Math.round(this.canvas.width/2);const r=`bold ${Math.round(this.canvas.width/18)}px Verdana`;y(this.context,e,r,s,o,t,"center")}drawSecondaryInfo(t,e){let o=Math.round(this.canvas.height/2)+Math.round(this.canvas.height/5),s=Math.round(this.canvas.width/2);const r=`bold ${Math.round(this.canvas.width/22)}px Verdana`;y(this.context,e,r,s,o,t,"center")}drawPlatform(t){A(this.context,t.color,t.position.x,t.position.y,t.width,t.height)}drawBall(t){st(this.context,t.color,t.position.x,t.position.y,t.radius)}drawBrick(t){A(this.context,t.color,t.position.x,t.position.y,t.width,t.height)}drawBricks(t){t.forEach(e=>this.drawBrick(e))}}class ct{isCollidingBrick(t,e){return!(t.position.y+t.radius<=e.position.y||t.position.y-t.radius>=e.position.y+e.height||t.position.x+t.radius<=e.position.x||t.position.x-t.radius>=e.position.x+e.width)}isCollidingBricks(t,e){let o=!1;return e.forEach((s,n)=>{this.isCollidingBrick(t,s)&&(t.changeYDirection(),s.energy===1?e.splice(n,1):s.energy-=1,o=!0)}),o}checkBallCollision(t,e,o){t.position.x-t.radius>=e.position.x&&t.position.x+t.radius<=e.position.x+e.width&&t.position.y+t.radius>=e.position.y&&t.position.y+t.radius<=e.position.y+2&&t.changeYDirection(),(t.position.x>=o.canvas.width-t.radius||t.position.x-t.radius<=0)&&t.changeXDirection(),t.position.y-t.radius<=0&&t.changeYDirection()}}let g=!1,l=!0,a=0,c=R;function at(i){i.drawInfo("Game Over!",X),g=!1,i.waitPressToStart()}function dt(i){i.drawInfo("Game Won!",q),g=!1,i.waitPressToStart()}function B(i,t,e,o,s){if(i.clear(),i.drawScore(a),i.showLives(c),i.drawBricks(t),i.drawPlatform(e),l){if(o.moveBall(),i.drawBall(o),(e.isMovingLeft&&e.position.x>0||e.isMovingRight&&e.position.x<i.canvas.width-e.width)&&e.move(),s.checkBallCollision(o,e,i),s.isCollidingBricks(o,t)&&(a+=1,i.drawScore(a)),o.position.y-o.height>i.canvas.height&&(c=c-1,c<1?g=!0:l=!1),t.length===0)return dt(i);if(g)return at(i)}else i.drawInfo("GET READY!",L),i.waitPressToStart(),o.position.y-o.height>i.canvas.height&&(o=O(),e=m(i.canvas.height));requestAnimationFrame(()=>B(i,t,e,o,s))}function ut(i){if(l){ft(i);return}l=!0}function ft(i){a=0,c=R,i.drawScore(0);const t=new ct,e=ot(),o=O(),s=m(i.canvas.height);B(i,e,s,o,t)}const gt=new ht("#gameCanvas");gt.initStartButton(ut);
